{"ast":null,"code":"var _jsxFileName = \"/Users/savanasathre/CodingApril/UTube/src/containers/Home/Home.js\";\nimport React from 'react';\nimport { connect } from \"react-redux\";\nimport * as videoActions from \"../../store/actions/video\";\nimport './Home.scss';\nimport { SideBar } from '../SideBar/SideBar';\nimport HomeContent from './HomeContent/HomeContent';\nimport { bindActionCreators } from 'redux';\nimport { getYoutubeLibraryLoaded } from '../../store/reducers/api';\nimport { getVideoCategoryIds, videoCategoriesLoaded, videosByCategoryLoaded } from '../../store/reducers/videos';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.bottomReachedCallback = () => {\n      if (!this.props.videoCategoriesLoaded) {\n        return;\n      }\n\n      this.fetchVideosByCategory();\n    };\n\n    this.state = {\n      categoryIndex: 0\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(SideBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(HomeContent, {\n      bottomReachedCallback: this.bottomReachedCallback,\n      showLoader: this.shouldShowLoader(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  componentDidMount() {\n    if (this.props.youtubeLibraryLoaded) {\n      this.fetchCategoriesAndMostPopularVideos();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\n      this.fetchCategoriesAndMostPopularVideos();\n    } else if (this.props.videoCategories !== prevProps.videoCategories) {\n      this.fetchVideosByCategory();\n    }\n  }\n\n  fetchVideosByCategory() {\n    const categoryStartIndex = this.state.categoryIndex;\n    const categories = this.props.videoCategories.slice(categoryStartIndex, categoryStartIndex + 3);\n    this.props.fetchMostPopularVideosByCategory(categories);\n    this.setState(prevState => {\n      return {\n        categoryIndex: prevState.categoryIndex + 3\n      };\n    });\n  }\n\n  fetchCategoriesAndMostPopularVideos() {\n    this.props.fetchMostPopularVideos();\n    this.props.fetchVideoCategories();\n  }\n\n  shouldShowLoader() {\n    if (this.props.videoCategoriesLoaded && this.props.videosByCategoryLoaded) {\n      return this.state.categoryIndex < this.props.videoCategories.length;\n    }\n\n    return false;\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\n    videoCategories: getVideoCategoryIds(state),\n    videoCategoriesLoaded: videoCategoriesLoaded(state),\n    videosByCategoryLoaded: videosByCategoryLoaded(state)\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const fetchMostPopularVideos = videoActions.mostPopular.request;\n  const fetchVideoCategories = videoActions.categories.request;\n  const fetchMostPopularVideosByCategory = videoActions.mostPopularByCategory.request;\n  return bindActionCreators({\n    fetchMostPopularVideos,\n    fetchVideoCategories,\n    fetchMostPopularVideosByCategory\n  }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["/Users/savanasathre/CodingApril/UTube/src/containers/Home/Home.js"],"names":["React","connect","videoActions","SideBar","HomeContent","bindActionCreators","getYoutubeLibraryLoaded","getVideoCategoryIds","videoCategoriesLoaded","videosByCategoryLoaded","Home","Component","constructor","props","bottomReachedCallback","fetchVideosByCategory","state","categoryIndex","render","shouldShowLoader","componentDidMount","youtubeLibraryLoaded","fetchCategoriesAndMostPopularVideos","componentDidUpdate","prevProps","videoCategories","categoryStartIndex","categories","slice","fetchMostPopularVideosByCategory","setState","prevState","fetchMostPopularVideos","fetchVideoCategories","length","mapStateToProps","mapDispatchToProps","dispatch","mostPopular","request","mostPopularByCategory"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from \"react-redux\";\nimport * as videoActions from \"../../store/actions/video\";\nimport './Home.scss';\nimport {SideBar} from '../SideBar/SideBar';\nimport HomeContent from './HomeContent/HomeContent';\nimport {bindActionCreators} from 'redux';\nimport {getYoutubeLibraryLoaded} from '../../store/reducers/api';\nimport {getVideoCategoryIds, videoCategoriesLoaded, videosByCategoryLoaded} from '../../store/reducers/videos';\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      categoryIndex: 0,\n    };\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <SideBar/>\n        <HomeContent\n          bottomReachedCallback={this.bottomReachedCallback}\n          showLoader={this.shouldShowLoader()}/>\n      </React.Fragment>\n    );\n  }\n\n  componentDidMount() {\n    if (this.props.youtubeLibraryLoaded) {\n      this.fetchCategoriesAndMostPopularVideos();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\n      this.fetchCategoriesAndMostPopularVideos();\n    } else if (this.props.videoCategories !== prevProps.videoCategories) {\n      this.fetchVideosByCategory();\n    }\n  }\n\n  fetchVideosByCategory() {\n    const categoryStartIndex = this.state.categoryIndex;\n    const categories = this.props.videoCategories.slice(categoryStartIndex, categoryStartIndex + 3);\n    this.props.fetchMostPopularVideosByCategory(categories);\n    this.setState(prevState => {\n      return {\n        categoryIndex: prevState.categoryIndex + 3,\n      };\n    });\n  }\n\n  fetchCategoriesAndMostPopularVideos() {\n    this.props.fetchMostPopularVideos();\n    this.props.fetchVideoCategories();\n  }\n\n  bottomReachedCallback = () => {\n    if (!this.props.videoCategoriesLoaded) {\n      return;\n    }\n    this.fetchVideosByCategory();\n  };\n\n  shouldShowLoader() {\n    if (this.props.videoCategoriesLoaded && this.props.videosByCategoryLoaded) {\n      return this.state.categoryIndex < this.props.videoCategories.length;\n    }\n    return false;\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\n    videoCategories: getVideoCategoryIds(state),\n    videoCategoriesLoaded: videoCategoriesLoaded(state),\n    videosByCategoryLoaded: videosByCategoryLoaded(state),\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  const fetchMostPopularVideos = videoActions.mostPopular.request;\n  const fetchVideoCategories = videoActions.categories.request;\n  const fetchMostPopularVideosByCategory = videoActions.mostPopularByCategory.request;\n  return bindActionCreators({fetchMostPopularVideos, fetchVideoCategories, fetchMostPopularVideosByCategory}, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);"]},"metadata":{},"sourceType":"module"}